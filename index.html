@echo off
REM ============================================================
REM   XMRig CPU Miner â€“ Mod sigur + Log automat
REM ============================================================

REM ðŸ‘‰ Introdu adresa portofelului tÄƒu Monero (Ã®ncepe cu 4 sau 44â€¦)
set WALLET=44SrzvrFJH1NuK9HkD1aSURdt9xQchmg8BeMTF7xxws39nirMwM9dfoUvmpdcuPsPRZdy1FZuVeH36enbpk97essByLKy7T

REM ðŸ‘‰ Pool recomandat
set POOL=pool.minexmr.com:4444

REM ðŸ‘‰ Prioritatea CPU (1 = minim, 10 = maxim)
set CPU_PRIORITY=2

REM ðŸ‘‰ Temperatura maximÄƒ CPU (Â°C)
set MAX_TEMP=85

REM ðŸ‘‰ FiÈ™ier de log
set LOG_FILE=miner_log.txt

echo --------------------------------------------
echo   Pornire miner XMRig (Mod Sigur + Log)
echo   Pool: %POOL%
echo   Oprire automatÄƒ la %MAX_TEMP%Â°C
echo   Log scris Ã®n %LOG_FILE%
echo --------------------------------------------
echo.

:loop
REM --- Citeste temperatura CPU
for /f "tokens=2 delims==." %%T in ('wmic /namespace:\\root\wmi PATH MSAcpi_ThermalZoneTemperature get CurrentTemperature /value 2^>nul') do (
    set /a TEMP_C=%%T/10-273
)

if "%TEMP_C%"=="" (
    set TEMP_C=NA
)

if NOT "%TEMP_C%"=="NA" if %TEMP_C% GEQ %MAX_TEMP% (
    echo [%date% %time%] [ALERT] Temperatura CPU = %TEMP_C%C. Miner oprit pentru protecÈ›ie! >> %LOG_FILE%
    echo [ALERT] Temperatura CPU = %TEMP_C%C. Miner oprit pentru protecÈ›ie!
    pause
    exit
)

REM --- RuleazÄƒ minerul È™i scrie log
echo [%date% %time%] Pornire job miner. Temp CPU=%TEMP_C%C >> %LOG_FILE%
xmrig.exe --url %POOL% --user %WALLET% --donate-level 0 --cpu-priority %CPU_PRIORITY% --coin monero >> %LOG_FILE% 2>&1

REM --- Asteapta 5 secunde inainte de a verifica temperatura din nou
timeout /t 5 >nul
goto loop